---
title: 理解css3中的transform
date: 2017-12-16 19:08:44
tags:
     - CSS
---
之前每次遇到css3动画的时候,都得去查一下,写完之后又忘了,今天来探究记录一下
<!-- more -->
### 1.参考链接
  - [从矩阵与空间操作的关系理解CSS3的transform](http://hcysun.me/2017/05/13/%E4%BB%8E%E7%9F%A9%E9%98%B5%E4%B8%8E%E7%A9%BA%E9%97%B4%E6%93%8D%E4%BD%9C%E7%9A%84%E5%85%B3%E7%B3%BB%E7%90%86%E8%A7%A3CSS3%E7%9A%84transform/)
  - 这位前辈从线性代数中的矩阵与矩阵变换来讲解了css3中的transform 属性,推荐去看,我在看完他的文章之后,想自己整理记录一下,加深印象

### 2.线性代数中的那些事
  1.何为向量?
  两因素可以总结
   - 长度,
   - 方向
   ![](/images/121601.jpeg) 
  图中代表了在二维空间中的四个向量,在线性代数中,向量都是从原点出发,每个向量,我们都可以用它的箭头终点坐标来表示,如![](/images/121605.jpeg) ,所以坐标系中的每个点都代表着一个向量

  2.基向量
  基向量也叫单位向量,即单位长度为1的向量,  
   ![](/images/121602.jpeg) 
  如图,i帽和j帽就是二维坐标系中的基向量 

  3.线性变换
   变换可以看做一个向量从初始状态到最总状态的一个过程,前面我们已经了解到,在二维空间内,所有的坐标都可以看成一个向量,如何所有的坐标都做着相同的变换,那就是整个平面的变换了
   before:
   ![](/images/121603.jpeg)
   after:
   ![](/images/121604.jpeg)
   不过,并非所有的变换都是线性变换,必须满足下面两个要求
    - 直线在变换之后仍然是指向,不能弯曲
    - 原点不能移动

  4.数值来表示线性变换
    空间的变换就是每个向量的变换,而每个向量都可以用坐标来表示,即数字序列,所以在向量变换前后,必然会有相关数字序列的变化

    上面也介绍了基向量,空间中所有向量都可看作是基向量变换过后的结果,如图
    ![](/images/121607.jpeg)
    向量V的坐标是 ![](/images/121605.jpeg),纯数字3,-2可以看做标量,那么向量 v可以看做基向量被标量缩放后相加得到的和向量:v=3i+(-2)j

    默认基向量 i,j坐标为 (1,0)和(0,1),此时我们有向量 V = -1i +2j; ,用坐标可以表示为 (-1,2)
    ![](/images/121608.jpeg)
    现在我们做些转换,此时,基向量i,j的坐标变成了(1,-2)和(3,0)
    ![](/images/121609.jpeg)
    变换过后的向量仍然符合 V = -1i +2j;
    ![](/images/121610.jpeg)
    根据变换过后的 *i帽* 和 *j帽* ,我们能推算出 V的坐标(5,2),计算结果如下
    ![](/images/121611.jpeg)
    所以任意一个向量,其坐标 (x, y)，我们可以通过变换后的基向量的坐标推断出该向量变换后的坐标,我们还用上面那基向量变换后的坐标
    ![](/images/121612.jpeg)
    所以求任意向量(x,y)变换过后的坐标计算如下
    ![](/images/121613.jpeg)

  5.矩阵
    从上面可以得出,二维空间的线性变换仅有4个数字完全决定,4个数字就是基向量i,j变换过后的坐标,把俩坐标放一起,就形成了矩阵
    ![](/images/121614.jpeg)
    假设现在基向量i,j变换过后的坐标分别是[a,c],[b,d],所以任意向量[x,y]变换过后的的坐标计算如下
    ![](/images/121615.jpeg)
    这就是矩阵的向量乘法

  6.终于回到了 css 了
    都知道,给*块级元素*定义了transform属性后,元素可以*旋转(rotate)*,*缩放(scale)*,*倾斜(skew)*,*位移(translate)*,
	以上所有的转换都可以在 *matrix()* 函数中一起来定义

	matrix()函数默认值如下
	  ```
	  tarnsform:matrix(1,0,0,1,0,0)
	  ```
	首先得知道,在*开发中,y轴以向下为正*,以上面的知道我们可以知道,matrix()函数的6个默认值分表代码,基向量i,j 和原点的坐标
	
	为啥还带上了原点坐标? 因为 *位移(translate)* 会改变原点坐标,而其余三项都不会改变原点坐标

	我们把函数6个值分表用字母表示,如 matrix(a,b,c,d,e,f);
   1,我们设置 a 为2,相当于把基向量 i 放大二倍,所以
      
       ```
       tarnsform:matrix(2,0,0,1,0,0)
       //等同于
       transform:scaleX(2)
       ```

   2,我们设置 d 为0.5,相当于把基向量 j 缩小一倍,所以
      
      ```
      tarnsform:matrix(1,0,0,0.5,0,0)
      //等同于
      transform:scaleY(0.5)
	  ```
   3.如果a,d设置成负数,就会发生 *翻转*  
   4.顺时针旋转45度,

	  ![](/images/121616.jpeg)
	  如图,我们可以计算出,旋转过后基向量i,j的坐标分别是 (cosθ, sinθ),(-sinθ, cosθ),
	  在matrix()我们可以如下表示

	   ```
       transform: matrix(0.707106, 0.707106, -0.707106, 0.707106, 0, 0)
       //等同于
       transform:rotate(45deg)
	   ```

      


